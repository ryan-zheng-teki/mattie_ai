<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ion Formation Visualizer</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="header">
        <h1>Ion Formation Visualizer <span class="science-icon">‚öõÔ∏è</span></h1>
        <p>Watch atoms gain or lose electrons to become stable ions!</p>
    </div>
    
    <div class="main-container">
        <div id="controls">
            <div class="control-group">
                <label for="element-select">Pick an Element:</label>
                <select id="element-select">
                    <option value="Na">Sodium (Na) üßÇ</option>
                    <option value="Cl">Chlorine (Cl) üèä</option>
                    <option value="Mg">Magnesium (Mg) üí™</option>
                    <option value="Ca">Calcium (Ca) ü•õ</option>
                    <option value="K">Potassium (K) üçå</option>
                    <option value="F">Fluorine (F) ü¶∑</option>
                    <option value="Al">Aluminum (Al) ü•´</option>
                    <option value="O">Oxygen (O) üí®</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="state-select">Choose State:</label>
                <select id="state-select">
                    <option value="neutral">Neutral Atom</option>
                    <option value="ion">Ion</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="speed-control">Electron Speed:</label>
                <input type="range" id="speed-control" min="0.004" max="1.0" step="0.001" value="0.1">
            </div>
            
            <button id="animate-button" class="primary-button">
                <i class="fas fa-play-circle"></i> Show Ionization
            </button>
            
            <button id="view-toggle" class="toggle-button" title="Toggle Detail Level">
                <i class="fas fa-eye"></i> <span id="view-mode-text">Simple View</span>
            </button>
        </div>
        
        <div class="tabs-container">
            <div class="tab active" data-tab="visualization">Atom View</div>
            <div class="tab" data-tab="guide">How It Works</div>
            <div class="tab" data-tab="learn">Fun Facts</div>
            <div class="tab" data-tab="quiz">Quiz</div>
        </div>
        
        <div class="tab-content active" id="visualization-tab">
            <div class="split-view">
                <div class="animation-container">
                    <div id="visualization-container">
                        <!-- Three.js canvas will be inserted here -->
                        <div id="temporary-labels"></div>
                        <div id="animation-narration"></div>
                        <div class="animation-controls">
                            <button id="step-by-step-toggle" title="Step-by-Step Mode">
                                <i class="fas fa-shoe-prints"></i> Step-by-Step
                            </button>
                            <button id="next-step" title="Next Step" disabled>
                                <i class="fas fa-step-forward"></i> Next
                            </button>
                            <button id="zoom-in" title="Zoom In">
                                <i class="fas fa-search-plus"></i>
                            </button>
                            <button id="zoom-out" title="Zoom Out">
                                <i class="fas fa-search-minus"></i>
                            </button>
                            <button id="fullscreen-button" title="Fullscreen">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="explanation-panel">
                    <div class="panel-section">
                        <h3>Element Info</h3>
                        <div id="element-info" class="info-box"></div>
                    </div>
                    
                    <div class="panel-section">
                        <h3>What's Happening</h3>
                        <div id="explanation-box"></div>
                    </div>
                    
                    <div class="panel-section">
                        <h3>Legend</h3>
                        <div class="legend-items">
                            <div class="legend-item">
                                <div class="icon nucleus-icon">‚óè</div>
                                <span>Nucleus</span>
                            </div>
                            <div class="legend-item">
                                <div class="icon electron-icon">‚Ä¢</div>
                                <span>Electron</span>
                            </div>
                            <div class="legend-item">
                                <div class="icon shell-icon">‚óØ</div>
                                <span>Electron Shell</span>
                            </div>
                            <div class="legend-item">
                                <div class="icon positive-icon">+</div>
                                <span>Positive Charge</span>
                            </div>
                            <div class="legend-item">
                                <div class="icon negative-icon">‚àí</div>
                                <span>Negative Charge</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="panel-section">
                        <h3>Shell Status</h3>
                        <div id="shell-status"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="guide-tab">
            <div class="guide-content">
                <h3>How to Read the Atom View</h3>
                <div class="guide-grid">
                    <div class="guide-item">
                        <div class="guide-icon nucleus-icon"></div>
                        <div class="guide-text">
                            <h4>Nucleus</h4>
                            <p>The center of the atom where protons and neutrons live!</p>
                        </div>
                    </div>
                    <div class="guide-item">
                        <div class="guide-icon shell-icon"></div>
                        <div class="guide-text">
                            <h4>Shells</h4>
                            <p>Colored rings where electrons orbit - each shell can only hold so many electrons.</p>
                        </div>
                    </div>
                    <div class="guide-item">
                        <div class="guide-icon electron-icon"></div>
                        <div class="guide-text">
                            <h4>Electrons</h4>
                            <p>Tiny particles that buzz around the nucleus. When atoms share or trade them, they form ions!</p>
                        </div>
                    </div>
                    <div class="guide-item">
                        <div class="guide-icon charge-icon"></div>
                        <div class="guide-text">
                            <h4>Charge</h4>
                            <p>The + or - signs show if the atom lost or gained electrons.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="learn-tab">
            <div class="learn-content">
                <h3>Fun Facts About Ions</h3>
                <div class="fun-fact">
                    <i class="fas fa-bolt fact-icon"></i>
                    <p>Ions are atoms that have gained or lost electrons. It's like having too many or too few friends at a party!</p>
                </div>
                <div class="fun-fact">
                    <i class="fas fa-plus-circle fact-icon"></i>
                    <p><strong>Cations</strong> lose electrons and become positively charged. They're like atoms that gave away some presents.</p>
                </div>
                <div class="fun-fact">
                    <i class="fas fa-minus-circle fact-icon"></i>
                    <p><strong>Anions</strong> gain electrons and become negatively charged. They're like atoms that received extra gifts!</p>
                </div>
                <div class="fun-fact">
                    <i class="fas fa-star fact-icon"></i>
                    <p>Atoms form ions to have full outer shells. It's like trying to complete a sticker collection!</p>
                </div>
                <div class="fun-fact">
                    <i class="fas fa-utensils fact-icon"></i>
                    <p>The salt on your food (NaCl) is made of sodium and chloride ions stuck together!</p>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="quiz-tab">
            <div class="quiz-container">
                <h3>Test Your Knowledge!</h3>
                <div id="quiz-question"></div>
                <div id="quiz-options"></div>
                <div id="quiz-feedback"></div>
                <button id="next-question" class="primary-button">Next Question</button>
            </div>
        </div>
    </div>

    <!-- Import Three.js and Tween.js -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/",
                "tween": "https://unpkg.com/@tweenjs/tween.js@23.1.1/dist/tween.esm.js"
            }
        }
    </script>

    <!-- Application scripts -->
    <script type="module" src="js/elements-data.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/visualization.js"></script>
    <script type="module" src="js/animation.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
